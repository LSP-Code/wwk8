<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>WWK8 Live Hub Calendar</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body { background-color: #050505; color: #fff; font-family: 'Inter', sans-serif; height: 100vh; overflow: hidden; }
        .glass { background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.1); }
        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 4px; }
        
        .day-cell { 
            aspect-ratio: 1/1; display: flex; align-items: center; justify-content: center; 
            border-radius: 8px; font-size: 0.75rem; border: 1px solid rgba(255,255,255,0.03);
            cursor: pointer; transition: all 0.2s; position: relative;
        }

        /* PERMANENT TODAY GLOW */
        .today-glow {
            border: 2px solid #facc15 !important;
            box-shadow: 0 0 10px rgba(250, 204, 21, 0.4);
            animation: soft-pulse 2s infinite;
        }

        @keyframes soft-pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }

        /* SELECTED DAY (When user clicks) */
        .selected-day {
            background: #facc15 !important;
            color: #000 !important;
            box-shadow: 0 0 20px rgba(250, 204, 21, 0.8);
            font-weight: 900;
            transform: scale(1.1);
            z-index: 10;
        }

        .has-event { border-bottom: 2px solid rgba(250, 204, 21, 0.5); }
        .no-school-day { color: #facc15; font-weight: 900; }
        
        .no-scrollbar::-webkit-scrollbar { display: none; }
        
        @media (max-width: 768px) {
            .main-container { flex-direction: column; }
            .calendar-section { height: 48%; padding: 0.75rem; }
            .event-section { height: 52%; border-top: 1px solid rgba(255,255,255,0.1); }
        }
    </style>
</head>
<body class="flex flex-col">

    <nav class="p-2.5 flex justify-between items-center glass shrink-0">
        <button onclick="window.history.back()" class="flex items-center gap-1 px-3 py-1 rounded-lg bg-white/5 text-[10px] uppercase font-bold border border-white/10">
            <i data-lucide="chevron-left" class="w-3 h-3 text-yellow-400"></i> Back
        </button>
        <h1 class="font-black italic text-xs tracking-tighter uppercase">WWK8 <span class="text-yellow-400">Hub</span></h1>
    </nav>

    <div class="flex flex-1 overflow-hidden main-container">
        
        <section class="calendar-section w-full md:w-3/5 p-4 flex flex-col justify-center">
            <div class="flex justify-between items-center mb-3 px-1">
                <h2 id="currentMonthLabel" class="text-lg font-bold italic tracking-tight">Month Year</h2>
                <div class="flex gap-1">
                    <button onclick="changeMonth(-1)" class="p-1 glass rounded-full"><i data-lucide="chevron-left" class="w-4 h-4 text-yellow-400"></i></button>
                    <button onclick="goToday()" class="px-2 text-[9px] font-black uppercase glass rounded-md border-yellow-400/30 border">Today</button>
                    <button onclick="changeMonth(1)" class="p-1 glass rounded-full"><i data-lucide="chevron-right" class="w-4 h-4 text-yellow-400"></i></button>
                </div>
            </div>

            <div class="calendar-grid text-[9px] text-gray-500 font-black mb-1 text-center uppercase tracking-widest">
                <div>S</div><div>M</div><div>T</div><div>W</div><div>T</div><div>F</div><div>S</div>
            </div>
            <div id="calendarDays" class="calendar-grid"></div>
        </section>

        <section class="event-section w-full md:w-2/5 glass flex flex-col overflow-hidden">
            <div class="p-3 border-b border-white/10 flex justify-between items-center bg-white/5">
                <span id="sidebarTitle" class="text-[10px] font-bold uppercase tracking-widest text-yellow-400">Schedule</span>
                <button onclick="clearSelection()" id="viewAllBtn" class="hidden text-[10px] font-bold text-gray-400 uppercase flex items-center gap-1">
                    <i data-lucide="rotate-ccw" class="w-3 h-3"></i> Clear
                </button>
            </div>
            <div id="eventSidebar" class="flex-1 overflow-y-auto p-4 space-y-2 no-scrollbar"></div>
        </section>
    </div>

    <script>
        const events = [
            { title: "Winter Break", date: "2025-12-22", endDate: "2026-01-02", category: "No School", icon: "snowflake" },
            { title: "Professional Day", date: "2026-01-05", category: "No School", icon: "briefcase" },
            { title: "MLK Day", date: "2026-01-19", category: "No School", icon: "star" },
            { title: "Early Release", date: "2026-01-30", category: "Early Release", icon: "bus" },
            { title: "Elementary Photos", date: "2026-02-05", category: "School Photos", icon: "camera" },
            { title: "Early Release", date: "2026-02-27", category: "Early Release", icon: "bus" },
            { title: "Spring Photos", date: "2026-03-03", endDate: "2026-03-04", category: "School Photos", icon: "camera" },
            { title: "Spring Break", date: "2026-03-16", endDate: "2026-03-20", category: "No School", icon: "sun" },
            { title: "Professional Day", date: "2026-03-23", category: "No School", icon: "briefcase" },
            { title: "Kinder Cap & Gown", date: "2026-04-22", category: "School Photos", icon: "graduation-cap" }
        ];

        let displayDate = new Date(); // Month currently being viewed
        const actualToday = new Date(); // The real clock date
        let selectedDateStr = null; 

        function render() {
            const daysContainer = document.getElementById('calendarDays');
            const label = document.getElementById('currentMonthLabel');
            daysContainer.innerHTML = '';
            label.innerText = displayDate.toLocaleDateString('en-US', { month: 'long', year: 'numeric' });

            const firstDay = new Date(displayDate.getFullYear(), displayDate.getMonth(), 1).getDay();
            const daysInMonth = new Date(displayDate.getFullYear(), displayDate.getMonth() + 1, 0).getDate();

            for (let i = 0; i < firstDay; i++) {
                const empty = document.createElement('div');
                empty.className = 'day-cell opacity-0 pointer-events-none';
                daysContainer.appendChild(empty);
            }

            for (let d = 1; d <= daysInMonth; d++) {
                const cellDate = new Date(displayDate.getFullYear(), displayDate.getMonth(), d);
                const dateStr = `${cellDate.getFullYear()}-${String(cellDate.getMonth() + 1).padStart(2, '0')}-${String(d).padStart(2, '0')}`;
                
                const cell = document.createElement('div');
                cell.className = 'day-cell';
                cell.innerText = d;

                // CHECK IF TODAY
                if (cellDate.toDateString() === actualToday.toDateString()) {
                    cell.classList.add('today-glow');
                }

                // CHECK IF SELECTED BY USER
                if (dateStr === selectedDateStr) {
                    cell.classList.remove('today-glow'); // Selection overrides the pulse
                    cell.classList.add('selected-day');
                }

                const dayEvents = events.filter(e => {
                    const start = e.date;
                    const end = e.endDate || e.date;
                    return dateStr >= start && dateStr <= end;
                });

                if (dayEvents.length > 0) {
                    const isNoSchool = dayEvents.some(e => e.category === "No School");
                    cell.classList.add(isNoSchool ? 'no-school-day' : 'has-event');
                }

                cell.onclick = () => selectDay(dateStr);
                daysContainer.appendChild(cell);
            }
            renderSidebar();
            lucide.createIcons();
        }

        function selectDay(dateStr) {
            selectedDateStr = dateStr;
            document.getElementById('viewAllBtn').classList.remove('hidden');
            document.getElementById('sidebarTitle').innerText = "Selected Day";
            render();
        }

        function clearSelection() {
            selectedDateStr = null;
            document.getElementById('viewAllBtn').classList.add('hidden');
            document.getElementById('sidebarTitle').innerText = "Upcoming Events";
            render();
        }

        function goToday() {
            displayDate = new Date();
            clearSelection();
        }

        function renderSidebar() {
            const sidebar = document.getElementById('eventSidebar');
            sidebar.innerHTML = '';
            
            let filtered = events;

            if (selectedDateStr) {
                filtered = events.filter(e => {
                    const start = e.date;
                    const end = e.endDate || e.date;
                    return selectedDateStr >= start && selectedDateStr <= end;
                });
            } else {
                const todayStr = actualToday.toISOString().split('T')[0];
                filtered = events.filter(e => (e.endDate || e.date) >= todayStr)
                                 .sort((a,b) => new Date(a.date) - new Date(b.date));
            }

            if (filtered.length === 0) {
                sidebar.innerHTML = `<div class="text-center py-10 text-[10px] text-gray-500 uppercase font-bold tracking-widest border-2 border-dashed border-white/5 rounded-2xl">No events on this day</div>`;
            }

            filtered.forEach(e => {
                const isNoSchool = e.category === "No School";
                const div = document.createElement('div');
                div.className = `p-3 rounded-xl flex items-center gap-3 border transition-all ${isNoSchool ? 'bg-yellow-400 border-yellow-400 text-black' : 'bg-white/5 border-white/10 text-white'}`;
                
                div.innerHTML = `
                    <div class="shrink-0 w-8 h-8 rounded flex items-center justify-center ${isNoSchool ? 'bg-black/10' : 'bg-yellow-400/10 text-yellow-400'}">
                        <i data-lucide="${e.icon}" class="w-4 h-4"></i>
                    </div>
                    <div class="min-w-0">
                        <h4 class="font-black text-[11px] truncate uppercase tracking-tighter leading-none mb-1">${e.title}</h4>
                        <p class="text-[9px] opacity-80 font-bold">${e.endDate ? 'Ongoing Event' : 'Scheduled Date'}</p>
                    </div>
                `;
                sidebar.appendChild(div);
            });
            lucide.createIcons();
        }

        function changeMonth(dir) {
            displayDate.setMonth(displayDate.getMonth() + dir);
            render();
        }

        render();
    </script>
</body>
</html>
