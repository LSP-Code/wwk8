w<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Winding Waters K-8 | Logan's Master Schedule</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #121212;
            --accent-yellow: #FFC107;
            --glass-bg: rgba(255, 255, 255, 0.05);
            --glass-dark: rgba(0, 0, 0, 0.9);
            --glass-border: rgba(255, 255, 255, 0.1);
            --text-white: #ffffff;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Montserrat', sans-serif; }
        body { background-color: var(--bg-color); color: var(--text-white); min-height: 100vh; width: 100vw; overflow: hidden; }

        /* Background Effects */
        .brush-stroke { position: fixed; background: var(--accent-yellow); filter: blur(120px); opacity: 0.12; z-index: 0; border-radius: 50%; pointer-events: none; }
        .stroke-1 { top: -10%; left: -10%; width: 60vw; height: 50vh; }
        .stroke-2 { bottom: -10%; right: -10%; width: 60vw; height: 50vh; }

        /* Global Hub Button (Dashboard) */
        .global-hub-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }

        .hub-btn {
            background: transparent;
            color: var(--accent-yellow);
            border: 1px solid var(--accent-yellow);
            padding: 8px 16px;
            border-radius: 8px;
            text-decoration: none;
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            transition: 0.3s;
            display: inline-block;
        }

        .hub-btn:hover {
            background: var(--accent-yellow);
            color: #000;
        }

        /* --- DASHBOARD VIEW --- */
        #dashboard-view {
            position: relative;
            z-index: 10;
            width: 90%;
            max-width: 550px;
            margin: 8vh auto;
            background: var(--glass-bg);
            backdrop-filter: blur(30px);
            -webkit-backdrop-filter: blur(30px);
            border: 1px solid var(--glass-border);
            border-radius: 35px;
            padding: 2.5rem;
            text-align: center;
            box-shadow: 0 40px 80px rgba(0,0,0,0.6);
        }

        .school-logo { width: 65px; height: 65px; background: var(--accent-yellow); margin: 0 auto 15px; border-radius: 15px; display: flex; align-items: center; justify-content: center; font-weight: 900; color: #000; font-size: 2rem; }
        .status-header { font-size: 0.85rem; text-transform: uppercase; color: var(--accent-yellow); letter-spacing: 4px; margin-bottom: 8px; font-weight: 700; }
        .timer-display { font-size: 5rem; font-weight: 900; margin: 10px 0; }

        /* --- HALLWAY VIEW --- */
        #hallway-view {
            display: none; 
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 100;
            background: #000;
            grid-template-columns: 30% 70%;
            padding: 0;
        }

        .hallway-sidebar {
            display: flex;
            align-items: center;
            justify-content: center;
            border-right: 1px solid var(--glass-border);
            z-index: 102;
        }

        .day-massive {
            font-size: 18vw;
            font-weight: 900;
            color: white;
            line-height: 1;
            letter-spacing: -10px;
        }

        .hallway-main {
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 0 5%;
            z-index: 102;
            overflow: hidden;
        }

        .glass-card-large {
            background: var(--glass-dark);
            border: 1px solid var(--glass-border);
            padding: 3rem;
            border-radius: 40px;
            border-left: 20px solid var(--accent-yellow);
            box-shadow: 0 50px 100px rgba(0,0,0,0.8);
            width: 100%;
        }

        .hallway-timer {
            font-size: clamp(5rem, 10.5vw, 15rem); 
            font-weight: 900;
            color: white;
            line-height: 1;
            letter-spacing: -5px;
            margin-top: 1rem;
            white-space: nowrap;
        }

        /* Top Bar Info */
        .hallway-top-left {
            position: absolute;
            top: 30px;
            left: 40px;
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .hallway-top-right {
            position: absolute;
            top: 30px;
            right: 40px;
            text-align: right;
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 12px;
            z-index: 110;
        }

        #hall-date { font-size: 1.2rem; opacity: 0.7; font-weight: 400; }
        #hall-clock { font-size: 3rem; font-weight: 900; color: var(--accent-yellow); line-height: 1; }

        .btn-row { display: flex; gap: 10px; margin-top: 5px; }

        .exit-btn { 
            background: rgba(255,255,255,0.1); 
            color: white; 
            border: 1px solid white; 
            padding: 8px 18px; 
            border-radius: 8px; 
            cursor: pointer; 
            font-size: 0.7rem; 
            font-weight: 900; 
            text-transform: uppercase;
            transition: 0.2s;
        }
        .exit-btn:hover { background: white; color: black; }

        /* Login & UI Controls */
        #login-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 2000; justify-content: center; align-items: center; backdrop-filter: blur(10px); }
        .login-box { background: #1a1a1a; padding: 3rem; border-radius: 30px; border: 1px solid var(--accent-yellow); text-align: center; width: 320px; }
        input { background: #2a2a2a; border: 1px solid #444; color: white; padding: 15px; border-radius: 12px; font-size: 1.5rem; width: 100%; text-align: center; margin: 20px 0; outline: none; }
        
        .btn-group { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 2rem; }
        .btn { padding: 18px; border-radius: 14px; font-weight: 700; text-transform: uppercase; cursor: pointer; border: none; transition: 0.3s; font-size: 0.8rem; }
        .btn-outline { background: transparent; border: 2px solid var(--accent-yellow); color: var(--accent-yellow); }
        .btn-solid { background: var(--accent-yellow); color: #000; }
        .btn-wide { grid-column: span 2; background: #2a2a2a; color: #fff; }
        
        select { background: #1a1a1a; color: white; border: 1px solid #333; padding: 12px; border-radius: 10px; width: 100%; margin-bottom: 20px; cursor: pointer; }
        .user-badge { font-size: 0.75rem; background: rgba(255,255,255,0.08); padding: 6px 16px; border-radius: 50px; color: #fff; margin-bottom: 15px; display: inline-block; border: 1px solid rgba(255,255,255,0.1); }
    </style>
</head>
<body>

    <div class="brush-stroke stroke-1"></div>
    <div class="brush-stroke stroke-2"></div>

    <div class="global-hub-container" id="dash-hub-link">
        <a href="https://wwk8.xyz" class="hub-btn">Back to Hub</a>
    </div>

    <div id="login-modal">
        <div class="login-box">
            <h2 style="color: var(--accent-yellow); margin-bottom: 10px;">STUDENT LOGIN</h2>
            <input type="password" id="pin-input" maxlength="4" placeholder="****">
            <button class="btn btn-solid" style="width: 100%;" onclick="checkPin()">Access Schedule</button>
            <button class="btn btn-outline" style="width: 100%; margin-top: 10px;" onclick="closeLogin()">Cancel</button>
        </div>
    </div>

    <div class="container" id="dashboard-view">
        <div class="school-logo">W</div>
        <div id="user-display" class="user-badge">Guest Access</div>
        <div id="dash-clock" style="font-size: 1.1rem; opacity: 0.6; margin-bottom: 20px;">00:00:00 AM</div>

        <select id="day-selector" onchange="update()">
            <option value="1">Day 1</option>
            <option value="2">Day 2</option>
            <option value="3">Day 3</option>
            <option value="4">Day 4</option>
            <option value="5">Day 5</option>
            <option value="6">Day 6</option>
            <option value="7">Day 7</option>
        </select>

        <div class="status-header">Current Status</div>
        <div id="dash-status" style="font-size: 2.2rem; font-weight: 900; line-height: 1.2;">Loading...</div>
        <div id="dash-subtext" style="opacity: 0.7; font-size: 1.1rem; margin-top: 8px;">---</div>

        <div class="timer-display" id="dash-timer">00:00:00</div>

        <div class="btn-group">
            <button class="btn btn-outline" id="login-btn" onclick="openLogin()">Student Sign In</button>
            <button class="btn btn-solid" id="logout-btn" style="display:none" onclick="logout()">Sign Out</button>
            <button class="btn btn-wide" onclick="toggleHallway(true)">Hallway Display Mode</button>
        </div>
    </div>

    <div id="hallway-view">
        <div class="hallway-top-left">
            <div class="school-logo" style="margin:0; width:50px; height:50px; font-size:1.5rem;">W</div>
            <div style="font-weight: 700; letter-spacing: 2px; font-size: 0.9rem;">WINDING WATERS K-8</div>
        </div>

        <div class="hallway-top-right">
            <div id="hall-date">Sunday, Jan 25, 2026</div>
            <div id="hall-clock">00:00:00 AM</div>
            <div class="btn-row">
                <a href="https://wwk8.xyz" class="hub-btn">Back to Hub</a>
                <button class="exit-btn" onclick="toggleHallway(false)">Exit Display</button>
            </div>
        </div>

        <div class="hallway-sidebar">
            <div id="hall-day-label" class="day-massive">D1</div>
        </div>

        <div class="hallway-main">
            <div class="glass-card-large">
                <div class="status-header" style="font-size: 1.5rem; margin-bottom: 1rem;">Live Schedule</div>
                <div id="hall-status" style="font-size: 4rem; font-weight: 900; margin-bottom: 5px;">---</div>
                <div id="hall-subtext" style="font-size: 1.8rem; opacity: 0.8; margin-bottom: 1.5rem;">---</div>
                <div id="hall-timer" class="hallway-timer">00:00:00</div>
            </div>
        </div>
    </div>

    <script>
        let currentUser = null;

        const basePeriods = [
            { hour: "1st Hour", name: "Language Arts 3", teacher: "Rebecca Skinner", lunch: "A Lunch" },
            { hour: "2nd Hour", name: "World History", teacher: "Sandra Badger", lunch: "B Lunch" },
            { hour: "3rd Hour", name: "Comp Science 3", teacher: "Nancy Schilling", lunch: "A Lunch" },
            { hour: "4th Hour", name: "M/J Guitar 1", teacher: "Mackenzie Torres", lunch: "A Lunch" },
            { hour: "5th Hour", name: "Critical Thinking", teacher: "Rebecca Skinner", lunch: "B Lunch" },
            { hour: "6th Hour", name: "Intro to Education", teacher: "Debbie Torres", lunch: "A Lunch" },
            { hour: "7th Hour", name: "Pre-AP Algebra 1", teacher: "Jeffery Shumate", lunch: "B Lunch" }
        ];

        const timeBlocks = [
            { start: "08:35", end: "09:23" },
            { start: "09:27", end: "10:14" },
            { start: "10:18", end: "11:05" },
            { start: "11:39", end: "12:39" },
            { start: "12:53", end: "13:29" },
            { start: "13:33", end: "14:18" },
            { start: "14:20", end: "15:10" }
        ];

        function getRotatedSchedule() {
            const day = parseInt(document.getElementById('day-selector').value);
            let rotated = [...basePeriods];
            const shift = (day - 1) % 7;
            for (let i = 0; i < shift; i++) { rotated.push(rotated.shift()); }
            return rotated.map((period, index) => ({
                ...period,
                start: timeBlocks[index].start,
                end: timeBlocks[index].end
            }));
        }

        function openLogin() { document.getElementById('login-modal').style.display = 'flex'; }
        function closeLogin() { document.getElementById('login-modal').style.display = 'none'; }
        
        function checkPin() {
            if (document.getElementById('pin-input').value === "9900") {
                currentUser = "Logan";
                document.getElementById('user-display').textContent = "Student: Logan Westlake";
                document.getElementById('login-btn').style.display = "none";
                document.getElementById('logout-btn').style.display = "block";
                closeLogin(); update();
            } else { alert("Incorrect PIN"); }
        }

        function logout() {
            currentUser = null;
            document.getElementById('user-display').textContent = "Guest Access";
            document.getElementById('login-btn').style.display = "block";
            document.getElementById('logout-btn').style.display = "none";
            update();
        }

        function toggleHallway(show) {
            const hallway = document.getElementById('hallway-view');
            const dashboard = document.getElementById('dashboard-view');
            const hubContainer = document.getElementById('dash-hub-link');
            
            if (show) {
                hallway.style.display = 'grid';
                dashboard.style.display = 'none';
                hubContainer.style.display = 'none'; // Hub button is inside hallway view separately
            } else {
                hallway.style.display = 'none';
                dashboard.style.display = 'block';
                hubContainer.style.display = 'block';
            }
        }

        function parseTime(timeStr) {
            const [h, m] = timeStr.split(':').map(Number);
            const d = new Date(); d.setHours(h, m, 0, 0); return d;
        }

        function update() {
            const now = new Date();
            const activeSchedule = getRotatedSchedule();
            
            const tStr = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: true });
            document.getElementById('dash-clock').textContent = tStr;
            document.getElementById('hall-clock').textContent = tStr;
            document.getElementById('hall-date').textContent = now.toLocaleDateString([], { weekday: 'long', month: 'short', day: 'numeric', year: 'numeric' });
            document.getElementById('hall-day-label').textContent = "D" + document.getElementById('day-selector').value;

            let found = false;
            for (let i = 0; i < activeSchedule.length; i++) {
                const p = activeSchedule[i];
                const s = parseTime(p.start);
                const e = parseTime(p.end);

                if (now >= s && now < e) {
                    const name = currentUser === "Logan" ? p.name : p.hour;
                    const sub = currentUser === "Logan" ? `${p.teacher} | ${p.lunch}` : "Sign in for student info";
                    setUI(name, sub, e - now);
                    found = true; break;
                }
                if (i < activeSchedule.length - 1) {
                    const nextS = parseTime(activeSchedule[i+1].start);
                    if (now >= e && now < nextS) {
                        const nextName = currentUser === "Logan" ? activeSchedule[i+1].name : activeSchedule[i+1].hour;
                        setUI("Passing Period", `Next: ${nextName}`, nextS - now);
                        found = true; break;
                    }
                }
            }
            if (!found) {
                const firstStart = parseTime(activeSchedule[0].start);
                if (now < firstStart) setUI("Pre-School", `Starts at ${activeSchedule[0].start}`, firstStart - now);
                else setUI("School Dismissed", "Weekend Preview Active", 0);
            }
        }

        function setUI(status, sub, diff) {
            const h = Math.floor(diff / 3600000);
            const m = Math.floor((diff % 3600000) / 60000);
            const s = Math.floor((diff % 60000) / 1000);
            const timerStr = diff > 0 ? `${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}` : "00:00:00";
            document.getElementById('dash-status').textContent = status;
            document.getElementById('dash-subtext').textContent = sub;
            document.getElementById('dash-timer').textContent = timerStr;
            document.getElementById('hall-status').textContent = status;
            document.getElementById('hall-subtext').textContent = sub;
            document.getElementById('hall-timer').textContent = timerStr;
        }

        setInterval(update, 1000);
        update();
    </script>
</body>
</html>
