<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Winding Waters K-8 | Logan's Smart Schedule</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #121212;
            --accent-yellow: #FFC107;
            --glass-bg: rgba(255, 255, 255, 0.05);
            --glass-dark: rgba(0, 0, 0, 0.85);
            --glass-border: rgba(255, 255, 255, 0.1);
            --text-white: #ffffff;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Montserrat', sans-serif; }
        body { background-color: var(--bg-color); color: var(--text-white); min-height: 100vh; width: 100vw; display: flex; justify-content: center; align-items: center; overflow: hidden; }

        /* Brushstrokes */
        .brush-stroke { position: fixed; background: var(--accent-yellow); filter: blur(120px); opacity: 0.15; z-index: 1; border-radius: 50%; }
        .stroke-1 { top: -15%; left: -10%; width: 70vw; height: 50vh; }
        .stroke-2 { bottom: -15%; right: -10%; width: 70vw; height: 50vh; }

        /* Dashboard View */
        .container { position: relative; z-index: 10; width: 90%; max-width: 550px; background: var(--glass-bg); backdrop-filter: blur(30px); -webkit-backdrop-filter: blur(30px); border: 1px solid var(--glass-border); border-radius: 35px; padding: 2.5rem; text-align: center; box-shadow: 0 40px 80px rgba(0,0,0,0.6); transition: all 0.5s ease; }
        
        #hallway-view { display: none; position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: 100; grid-template-columns: 1fr 2.5fr; padding: 5rem; background: var(--bg-color); background-image: radial-gradient(circle at center, #1a1a1a 0%, #121212 100%); }

        /* Components */
        .school-logo { width: 65px; height: 65px; background: var(--accent-yellow); margin: 0 auto 15px; border-radius: 15px; display: flex; align-items: center; justify-content: center; font-weight: 900; color: #000; font-size: 2rem; box-shadow: 0 0 25px rgba(255, 193, 7, 0.3); }
        .status-header { font-size: 0.85rem; text-transform: uppercase; color: var(--accent-yellow); letter-spacing: 4px; margin-bottom: 8px; font-weight: 700; }
        .timer-display { font-size: 5rem; font-weight: 900; margin: 10px 0; font-variant-numeric: tabular-nums; }
        .hallway-timer { font-size: 13rem; font-weight: 900; color: white; line-height: 0.9; letter-spacing: -5px; }

        /* Login Modal */
        #login-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 500; justify-content: center; align-items: center; backdrop-filter: blur(10px); }
        .login-box { background: #1a1a1a; padding: 3rem; border-radius: 30px; border: 1px solid var(--accent-yellow); text-align: center; width: 320px; }
        input { background: #2a2a2a; border: 1px solid #444; color: white; padding: 15px; border-radius: 12px; font-size: 1.5rem; width: 100%; text-align: center; margin: 20px 0; outline: none; }
        input:focus { border-color: var(--accent-yellow); }

        /* Controls */
        .btn-group { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 2rem; }
        .btn { padding: 18px; border-radius: 14px; font-weight: 700; text-transform: uppercase; cursor: pointer; border: none; transition: 0.3s; font-size: 0.8rem; letter-spacing: 1px; }
        .btn-outline { background: transparent; border: 2px solid var(--accent-yellow); color: var(--accent-yellow); }
        .btn-solid { background: var(--accent-yellow); color: #000; }
        .btn-wide { grid-column: span 2; background: #2a2a2a; color: #fff; }
        .btn:hover { transform: translateY(-3px); box-shadow: 0 10px 20px rgba(0,0,0,0.3); }

        .user-badge { font-size: 0.75rem; background: rgba(255,255,255,0.08); padding: 6px 16px; border-radius: 50px; color: #fff; margin-bottom: 15px; display: inline-block; border: 1px solid rgba(255,255,255,0.1); }
        .weekend-alert { color: var(--accent-yellow); font-weight: 700; margin-left: 8px; }

        /* Hallway Layout */
        .day-massive { font-size: 18rem; font-weight: 900; color: white; line-height: 1; }
        .glass-card-large { background: var(--glass-dark); backdrop-filter: blur(40px); border: 1px solid var(--glass-border); padding: 5rem; border-radius: 50px; border-left: 25px solid var(--accent-yellow); position: relative; }
        
        .btn-exit { position: fixed; top: 40px; right: 40px; background: rgba(255,255,255,0.1); color: white; border: 1px solid white; padding: 12px 24px; border-radius: 10px; cursor: pointer; z-index: 1001; font-weight: 700; }

        select { background: #1a1a1a; color: white; border: 1px solid #333; padding: 10px 20px; border-radius: 10px; width: 100%; margin-bottom: 20px; cursor: pointer; font-size: 1rem; }
    </style>
</head>
<body>

    <div class="brush-stroke stroke-1"></div>
    <div class="brush-stroke stroke-2"></div>

    <div id="login-modal">
        <div class="login-box">
            <h2 style="color: var(--accent-yellow); margin-bottom: 10px;">STUDENT LOGIN</h2>
            <p style="font-size: 0.8rem; opacity: 0.6;">Enter PIN for Logan Westlake</p>
            <input type="password" id="pin-input" maxlength="4" placeholder="****">
            <button class="btn btn-solid" style="width: 100%;" onclick="checkPin()">Access Schedule</button>
            <button class="btn btn-outline" style="width: 100%; margin-top: 10px;" onclick="closeLogin()">Cancel</button>
        </div>
    </div>

    <div class="container" id="dashboard-view">
        <div class="school-logo">W</div>
        <div id="user-display" class="user-badge">Guest Access</div>
        <div id="dash-clock" style="font-size: 1.1rem; opacity: 0.6; margin-bottom: 20px; font-weight: 400;">00:00:00 AM</div>

        <div style="text-align: left; margin-bottom: 10px; font-size: 0.7rem; color: var(--accent-yellow); font-weight: 700;">SELECT ROTATION:</div>
        <select id="day-selector" onchange="update()">
            <option value="1">Day 1 (Standard 1-7)</option>
            <option value="2">Day 2 (Starts with 2nd Hour)</option>
            <option value="3">Day 3 (Starts with 3rd Hour)</option>
            <option value="4">Day 4 (Starts with 4th Hour)</option>
            <option value="5">Day 5 (Starts with 5th Hour)</option>
            <option value="6">Day 6 (Starts with 6th Hour)</option>
            <option value="7">Day 7 (Starts with 7th Hour)</option>
        </select>

        <div class="status-header" id="status-label">Current Status</div>
        <div id="dash-status" style="font-size: 2.2rem; font-weight: 900; line-height: 1.2;">Loading...</div>
        <div id="dash-subtext" style="opacity: 0.7; font-size: 1.1rem; margin-top: 8px;">---</div>

        <div class="timer-display" id="dash-timer">00:00:00</div>

        <div class="btn-group">
            <button class="btn btn-outline" id="login-btn" onclick="openLogin()">Student Sign In</button>
            <button class="btn btn-solid" id="logout-btn" style="display:none" onclick="logout()">Sign Out</button>
            <button class="btn btn-wide" onclick="toggleHallway(true)">Hallway Display Mode</button>
        </div>
    </div>

    <div id="hallway-view">
        <button class="btn-exit" onclick="toggleHallway(false)">EXIT DISPLAY</button>
        
        <div style="position: absolute; top: 5rem; right: 5rem; text-align: right;">
            <div id="hall-date" style="font-size: 1.8rem; opacity: 0.6; font-weight: 400; margin-bottom: 5px;">---</div>
            <div id="hall-clock" style="font-size: 5rem; font-weight: 900; color: var(--accent-yellow); line-height: 1;">00:00:00 AM</div>
        </div>

        <div style="display: flex; flex-direction: column; justify-content: center;">
            <div id="hall-day-label" class="day-massive">D1</div>
        </div>

        <div style="display: flex; flex-direction: column; justify-content: center;">
            <div class="glass-card-large">
                <div class="status-header" style="font-size: 1.5rem; margin-bottom: 15px;">Live Schedule</div>
                <div id="hall-status" style="font-size: 5rem; font-weight: 900; margin-bottom: 5px;">---</div>
                <div id="hall-subtext" style="font-size: 2.5rem; opacity: 0.8; margin-bottom: 3rem;">---</div>
                <div id="hall-timer" class="hallway-timer">00:00:00</div>
            </div>
        </div>
    </div>

    <script>
        let currentUser = null; // 'Logan' or null

        // LOGAN'S MASTER DATA (Base Day 1)
        const basePeriods = [
            { hour: "1st Hour", name: "Language Arts 3", teacher: "Rebecca Skinner", lunch: "A Lunch" },
            { hour: "2nd Hour", name: "World History", teacher: "Sandra Badger", lunch: "B Lunch" },
            { hour: "3rd Hour", name: "Comp Science 3", teacher: "Nancy Schilling", lunch: "A Lunch" },
            { hour: "4th Hour", name: "M/J Guitar 1", teacher: "Mackenzie Torres", lunch: "A Lunch" },
            { hour: "5th Hour", name: "Critical Thinking", teacher: "Rebecca Skinner", lunch: "B Lunch" },
            { hour: "6th Hour", name: "Intro to Education", teacher: "Debbie Torres", lunch: "A Lunch" },
            { hour: "7th Hour", name: "Pre-AP Algebra 1", teacher: "Jeffery Shumate", lunch: "B Lunch" }
        ];

        // Standard Schedule Times (7 Blocks)
        const timeBlocks = [
            { start: "08:35", end: "09:23" },
            { start: "09:27", end: "10:14" },
            { start: "10:18", end: "11:05" },
            { start: "11:39", end: "12:39" }, // P4/Lunch Block
            { start: "12:53", end: "13:29" }, // P5 Block
            { start: "13:33", end: "14:18" },
            { start: "14:20", end: "15:10" }
        ];

        function getRotatedSchedule() {
            const day = parseInt(document.getElementById('day-selector').value);
            let rotated = [...basePeriods];
            // Rotation: Shift left by (day - 1)
            const shift = (day - 1) % 7;
            for (let i = 0; i < shift; i++) {
                rotated.push(rotated.shift());
            }
            // Map the names to the fixed time slots
            return rotated.map((period, index) => ({
                ...period,
                start: timeBlocks[index].start,
                end: timeBlocks[index].end
            }));
        }

        // Login Logic
        function openLogin() { document.getElementById('login-modal').style.display = 'flex'; }
        function closeLogin() { document.getElementById('login-modal').style.display = 'none'; }
        
        function checkPin() {
            const val = document.getElementById('pin-input').value;
            if (val === "9900") {
                currentUser = "Logan";
                document.getElementById('user-display').innerHTML = `Student: Logan Westlake <span id='wknd-tag' class='weekend-alert'></span>`;
                document.getElementById('login-btn').style.display = "none";
                document.getElementById('logout-btn').style.display = "block";
                closeLogin();
                update();
            } else { alert("Invalid PIN."); }
        }

        function logout() {
            currentUser = null;
            document.getElementById('user-display').innerHTML = "Guest Access";
            document.getElementById('login-btn').style.display = "block";
            document.getElementById('logout-btn').style.display = "none";
            update();
        }

        function toggleHallway(show) {
            document.getElementById('hallway-view').style.display = show ? 'grid' : 'none';
        }

        function parseTime(timeStr) {
            const [h, m] = timeStr.split(':').map(Number);
            const d = new Date(); d.setHours(h, m, 0, 0); return d;
        }

        function update() {
            const now = new Date();
            const activeSchedule = getRotatedSchedule();
            const isWeekend = ([0, 6].includes(now.getDay()));

            // Update Clocks
            const tStr = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: true });
            document.getElementById('dash-clock').textContent = tStr;
            document.getElementById('hall-clock').textContent = tStr;
            document.getElementById('hall-date').textContent = now.toLocaleDateString([], { weekday: 'long', month: 'short', day: 'numeric', year: 'numeric' });
            document.getElementById('hall-day-label').textContent = "D" + document.getElementById('day-selector').value;
            
            if(isWeekend && document.getElementById('wknd-tag')) {
                document.getElementById('wknd-tag').textContent = "(Weekend Mode)";
            }

            let found = false;
            for (let i = 0; i < activeSchedule.length; i++) {
                const p = activeSchedule[i];
                const s = parseTime(p.start);
                const e = parseTime(p.end);

                // Current Period
                if (now >= s && now < e) {
                    const name = currentUser === "Logan" ? p.name : p.hour;
                    const sub = currentUser === "Logan" ? `${p.teacher} | ${p.lunch}` : "Sign in for student info";
                    
                    setUI(name, sub, e - now);
                    found = true; break;
                }

                // Passing Period
                if (i < activeSchedule.length - 1) {
                    const nextS = parseTime(activeSchedule[i+1].start);
                    if (now >= e && now < nextS) {
                        const nextName = currentUser === "Logan" ? activeSchedule[i+1].name : activeSchedule[i+1].hour;
                        setUI("Passing Period", `Next: ${nextName}`, nextS - now);
                        found = true; break;
                    }
                }
            }

            if (!found) {
                const schoolStart = parseTime(activeSchedule[0].start);
                if (now < schoolStart) {
                    setUI("Pre-School", `Starts at ${activeSchedule[0].start}`, schoolStart - now);
                } else {
                    setUI("School Dismissed", "See you tomorrow!", 0);
                }
            }
        }

        function setUI(status, sub, diff) {
            const h = Math.floor(diff / 3600000);
            const m = Math.floor((diff % 3600000) / 60000);
            const s = Math.floor((diff % 60000) / 1000);
            const timerStr = diff > 0 ? `${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}` : "00:00:00";

            document.getElementById('dash-status').textContent = status;
            document.getElementById('dash-subtext').textContent = sub;
            document.getElementById('dash-timer').textContent = timerStr;
            
            document.getElementById('hall-status').textContent = status;
            document.getElementById('hall-subtext').textContent = sub;
            document.getElementById('hall-timer').textContent = timerStr;
        }

        setInterval(update, 1000);
        update();
    </script>
</body>
</html>
